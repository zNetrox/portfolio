<div id="cursor"></div>

<script>
    import { preloadImages } from '../js/utils.js'

    const cursor = document.querySelector("#cursor")
    const arrow = `<div class="arrow">
						<div><span></span></div>
						<div><span></span></div>
						<div><span></span></div>
					</div>`
    
    // suit la souris et centre le curseur
    document.addEventListener('mousemove', e => {
        const x = e.clientX - (cursor.offsetWidth / 2)
        const y = e.clientY - (cursor.offsetHeight / 2)
        cursor.style.transform = `translate(${x}px, ${y}px)`
    })

    // supprime le curseur
    document.querySelectorAll('.over-none').forEach(element => {
        element.addEventListener('mouseover', () => {
            cursor.classList.add('over-none')
        })
        element.addEventListener('mouseout', () => {
            cursor.classList.remove('over-none')
        })
    })

    // over fleche
    document.querySelectorAll('.over-link').forEach(element => {
        element.addEventListener('mouseover', () => {
            cursor.classList.add('over-link')
            cursor.innerHTML = arrow
        })
        element.addEventListener('mouseout', () => {
            cursor.classList.remove('over-link')
            cursor.innerHTML = ``
        })
    })

    // fill jaune
    document.querySelectorAll('.over-opacity').forEach(element => {
        element.addEventListener('mouseover', () => {
            cursor.classList.add('over-opacity')
        })
        element.addEventListener('mouseout', () => {
            cursor.classList.remove('over-opacity')
        })
    })

    document.querySelectorAll('.over-opacity').forEach(element => {
        element.addEventListener('mouseover', () => {
            cursor.classList.add('over-opacity')
        })
        element.addEventListener('mouseout', () => {
            cursor.classList.remove('over-opacity')
        })
    })

    // over image
    preloadImages('.over-image[data-image]','data-image', 'img/');

    document.querySelectorAll('.over-image').forEach(element => {
        element.addEventListener('mouseover', () => {
            cursor.classList.add('over-image');

            const image = element.getAttribute("data-image");
            cursor.style.backgroundImage = `url(img/${image})`;
        });
        element.addEventListener('mouseout', () => {
            cursor.classList.remove('over-image');
            // 'none' est légèrement plus propre que '' pour effacer un background
            cursor.style.backgroundImage = 'none'; 
        });
    });
</script>